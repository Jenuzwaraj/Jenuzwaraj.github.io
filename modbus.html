<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Modbus Protocol — Complete Tutorial & Reference</title>

  <style>
    :root{
      --bg1:#f8fbfd;
      --bg2:#e9f5f7;
      --card:#ffffff;
      --navy:#293462;
      --muted:#0e4d66;
      --text:#122;
      --code-bg:#f4fbfd;
      --code-text:#073;
      --teal:#1cd6ce;
      --shadow:rgba(16,24,40,0.06);
      --header-grad:linear-gradient(90deg,#b3ecff,#a8fff0,#d9ffff);
      --header-text:#083c5d;
    }

    html,body{
      height:100%;
      margin:0;
      font-family:'Segoe UI',Tahoma,Verdana,sans-serif;
      background:linear-gradient(180deg,var(--bg1),var(--bg2));
      color:var(--text);
    }

    /* HEADER */
    header{
      background:var(--header-grad);
      padding:48px 20px 60px;
      position:relative;
      text-align:center;
      box-shadow:0 3px 16px var(--shadow);
    }
    header h1{
      margin:0;
      font-size:2.1rem;
      font-weight:700;
      color:var(--header-text);
    }

    /* HAMBURGER */
    .hamburger{
      position:absolute;
      right:20px;
      bottom:18px;
      width:28px;
      height:22px;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      cursor:pointer;
      z-index:1100;
      padding:4px;
    }
    .hamburger span{
      height:3px;
      background:var(--header-text);
      border-radius:4px;
      transition:transform .25s,opacity .2s,background .2s;
    }
    .hamburger[aria-expanded="true"] span:nth-child(1){
      transform:translateY(8px) rotate(45deg);
    }
    .hamburger[aria-expanded="true"] span:nth-child(2){
      opacity:0;
    }
    .hamburger[aria-expanded="true"] span:nth-child(3){
      transform:translateY(-8px) rotate(-45deg);
    }

    /* SIDE MENU */
    .side-menu{
      position:fixed;
      top:0;
      right:-100%;
      width:320px;
      max-width:82%;
      height:100vh;
      background:var(--card);
      box-shadow:-3px 0 24px var(--shadow);
      transition:right .35s ease;
      z-index:1000;
      display:flex;
      flex-direction:column;
    }

    .side-menu.open{ right:0; }

    /* SCROLL AREA ABOVE TOGGLE */
    .menu-content{
      padding:28px 20px;
      overflow-y:auto;
      flex:1;
    }

    .side-menu h3{
      margin:0 0 12px;
      color:var(--navy);
      font-size:1.05rem;
    }

    .side-menu a{
      display:block;
      margin:8px 0;
      padding:10px 8px;
      font-size:0.98rem;
      color:var(--muted);
      text-decoration:none;
      border-radius:6px;
    }
    .side-menu a:hover{
      background:var(--bg2);
    }

    /* TOGGLE BAR FIXED AT BOTTOM */
    .toggle-bar{
      padding:14px 20px;
      border-top:1px solid rgba(0,0,0,0.1);
      background:var(--card);
    }
    .theme-control{
      display:flex;
      justify-content:space-between;
      align-items:center;
      background:linear-gradient(90deg,rgba(28,214,206,0.03),rgba(41,52,98,0.01));
      padding:10px;
      border-radius:8px;
    }
    .theme-control .label{
      font-size:0.98rem;
      color:var(--muted);
    }
    .theme-control button{
      padding:6px 12px;
      border-radius:6px;
      border:1px solid rgba(0,0,0,0.18);
      background:transparent;
      cursor:pointer;
      font-size:0.95rem;
      color:var(--muted);
    }

    /* OVERLAY */
    .overlay{
      position:fixed;
      top:0; left:0;
      width:100%; height:100%;
      background:rgba(0,0,0,0.3);
      display:none;
      z-index:900;
    }
    .overlay.show{ display:block; }

    /* CONTENT */
    main{
      max-width:1100px;
      margin:30px auto;
      padding:0 18px;
    }
    .card{
      background:var(--card);
      border-radius:12px;
      padding:34px 42px;
      margin:26px 0;
      box-shadow:0 6px 20px var(--shadow);
    }

    h2{
      color:var(--navy);
      border-bottom:3px solid var(--teal);
      padding-bottom:8px;
    }

    p{ line-height:1.6; }

    pre,code{
      background:var(--code-bg);
      border-left:4px solid var(--teal);
      padding:12px;
      border-radius:8px;
      display:block;
      color:var(--code-text);
      font-family:Consolas,monospace;
    }

    footer{
      text-align:center;
      margin:40px 0;
      color:var(--muted);
    }

    @media(max-width:900px){
      header{
        padding:36px 16px 54px;
      }
      header h1{
        font-size:1.6rem;
      }
    }

  </style>
</head>

<body>

  <div class="overlay" id="overlay" onclick="closeMenu()"></div>

  <header id="top">
    <h1>Modbus Protocol — Complete Tutorial & Reference</h1>

    <div class="hamburger" id="hamburger" onclick="toggleMenu()" aria-expanded="false">
      <span></span><span></span><span></span>
    </div>
  </header>

  <!-- SIDE MENU -->
  <nav class="side-menu" id="sideMenu">

    <!-- Scrollable Content -->
    <div class="menu-content">

      <h3>Explore</h3>
      <a href="index.html" class="nav-link">Home</a>

      <h3 style="margin-top:18px;">Sections</h3>

      <a href="#overview" class="nav-link">Overview</a>
      <a href="#origins" class="nav-link">Origins & Why It Matters</a>
      <a href="#communication" class="nav-link">Communication Model</a>
      <a href="#physical" class="nav-link">Physical & Link Layers</a>
      <a href="#variants" class="nav-link">Variants — RTU, ASCII, TCP</a>
      <a href="#data" class="nav-link">Data Model — Coils & Registers</a>
      <a href="#function-codes" class="nav-link">Function Codes</a>
      <a href="#frames" class="nav-link">Frame Formats</a>
      <a href="#crc" class="nav-link">CRC-16 and LRC</a>
      <a href="#exceptions" class="nav-link">Exception Responses</a>
      <a href="#addressing" class="nav-link">Addressing & Register Mapping</a>
      <a href="#implementation" class="nav-link">Implementing Master & Slave</a>
      <a href="#testing" class="nav-link">Testing & Debugging</a>
      <a href="#security" class="nav-link">Security Considerations</a>
      <a href="#checklist" class="nav-link">Best Practices Checklist</a>
      <a href="#conclusion" class="nav-link">Conclusion</a>

    </div>

    <!-- FIXED BOTTOM TOGGLE BAR -->
    <div class="toggle-bar">
      <div class="theme-control">
        <div class="label">Dark mode</div>
        <button id="darkToggle" aria-pressed="false">Enable</button>
      </div>
    </div>

  </nav>

  <main>

    <!-- Your existing content remains unchanged -->

    <section class="card" id="overview">
      <h2>Overview</h2>
      <p>Modbus is a simple application-layer messaging protocol...</p>
    </section>

    <!-- All other sections remain exactly the same as your previous file -->
    <!-- (I did not remove or edit your content.) -->

  </main>

  <footer>© 2025 All Rights Reserved</footer>

  <!-- SCRIPT -->
  <script>

    const menu = document.getElementById('sideMenu');
    const overlay = document.getElementById('overlay');
    const hamburger = document.getElementById('hamburger');
    const darkBtn = document.getElementById('darkToggle');

    function openMenu(){
      menu.classList.add('open');
      overlay.classList.add('show');
      hamburger.setAttribute('aria-expanded','true');
    }
    function closeMenu(){
      menu.classList.remove('open');
      overlay.classList.remove('show');
      hamburger.setAttribute('aria-expanded','false');
    }
    function toggleMenu(){
      menu.classList.contains('open') ? closeMenu() : openMenu();
    }

    document.querySelectorAll('.nav-link').forEach(link=>{
      link.addEventListener('click',()=>setTimeout(closeMenu,120));
    });

    /* DARK MODE */
    if(darkBtn){
      let dark = localStorage.getItem('modbus-dark') === 'true';

      function applyTheme(x){
        if(x){
          document.documentElement.style.setProperty('--bg1','#050505');
          document.documentElement.style.setProperty('--bg2','#0a0a0a');
          document.documentElement.style.setProperty('--card','#0b0d10');
          document.documentElement.style.setProperty('--navy','#d8f7ff');
          document.documentElement.style.setProperty('--muted','#bcd8d8');
          document.documentElement.style.setProperty('--text','#f6fbfb');
          document.documentElement.style.setProperty('--code-bg','#071016');
          document.documentElement.style.setProperty('--code-text','#e8fbfb');
          document.documentElement.style.setProperty('--header-grad','linear-gradient(90deg,#071426,#03202a)');
          document.documentElement.style.setProperty('--header-text','#d6f9ff');
          darkBtn.textContent='Disable';
        } else {
          document.documentElement.style.setProperty('--bg1','#f8fbfd');
          document.documentElement.style.setProperty('--bg2','#e9f5f7');
          document.documentElement.style.setProperty('--card','#ffffff');
          document.documentElement.style.setProperty('--navy','#293462');
          document.documentElement.style.setProperty('--muted','#0e4d66');
          document.documentElement.style.setProperty('--text','#122');
          document.documentElement.style.setProperty('--code-bg','#f4fbfd');
          document.documentElement.style.setProperty('--code-text','#073');
          document.documentElement.style.setProperty('--header-grad','linear-gradient(90deg,#b3ecff,#a8fff0,#d9ffff)');
          document.documentElement.style.setProperty('--header-text','#083c5d');
          darkBtn.textContent='Enable';
        }
      }

      applyTheme(dark);

      darkBtn.addEventListener('click',()=>{
        dark=!dark;
        localStorage.setItem('modbus-dark',dark);
        applyTheme(dark);
      });
    }

  </script>

</body>
</html>
